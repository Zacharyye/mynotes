### 文件读写需要确保字符编码一致

> JDK1.7 Files.readAllLines可以很方便地用一行代码完成文件内容读取
>
> `log.info("result: {}", Files.readAllLines(Paths.get("hello.txt"), Charset.forName("GBK")).stream().findFirst().orElse(""));`
>
> 按需的流式读取，需要消费某行数据时再读取，而不是把整个文件一次性读取到内存
>
> - FIle.lines方法，注意：需要手动释放资源

### 使用Files类静态方法进行文件操作注意释放文件句柄

>~

### 注意读写文件要考虑设置缓冲区

> 在进行文件IO处理的时候，使用合适的缓冲区可以明显提高性能

# 总结

1. 如果要读字符流，那么需要确保文件中字符的字符集和字符流的字符集是一致的，否则可能产生乱码
2. 使用Files类的一些流式处理操作，注意使用try-with-resources包装Stream，确保底层文件资源可以释放，避免产生too many open files的问题
3. 进行文件字节流操作的时候，一般情况下不考虑进行逐字节操作，使用缓冲区进行批量读写减少IO次数，性能会好很多。一般可以考虑直接使用缓冲输入输出流BufferedXXXStream，追求极限性能的话可以考虑使用FileChannel进行流转发
4. **强调**：文件操作因为涉及操作系统和文件系统的实现，JDK并不能确保所有IO API在所有平台的逻辑一致性，代码迁移到新的操作系统或文件系统时，要重新进行功能测试和性能测试